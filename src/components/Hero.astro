---
import { Image } from 'astro:assets';
import { GlitchText } from './GlitchText.tsx';
import { ShaderBackground } from './ShaderBackground.tsx';
import { IconDisplay } from './IconDisplay.tsx';
import ReactLogo from '../images/React_dark.svg';
import EffectLogo from '../images/Effect TS_dark.svg';
---

<section class="min-h-screen flex flex-col items-center justify-center relative px-4 py-20">
  <!-- Shader background -->
  <ShaderBackground client:load />
  
  <!-- Glitch background effect -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="glitch-lines"></div>
  </div>

  <!-- Main headline with animation -->
  <div class="relative z-10 text-center max-w-6xl mx-auto">
    <h1 class="text-6xl sm:text-8xl md:text-9xl font-black mb-8 leading-none">
      <GlitchText text="Don't" className="block" client:load />
      <div class="flex items-center justify-center gap-4">
        <Image 
          src={ReactLogo} 
          alt="React" 
          width={60} 
          height={60}
          class="opacity-70 hover:opacity-100 transition-opacity"
        />
        <div class="inline-block relative">
          <span class="typing-text text-electric-blue">use</span>
          <span class="typing-cursor animate-blink">|</span>
        </div>
      </div>
      <span class="block text-7xl sm:text-9xl md:text-[12rem] animate-pulse-slow">Effect</span>
      <div class="mt-4 flex items-center justify-center gap-4">
        <span class="text-xl sm:text-2xl md:text-3xl text-gray-400 font-mono">use</span>
        <Image 
          src={EffectLogo} 
          alt="Effect-TS" 
          width={50} 
          height={50}
          class="opacity-90 hover:opacity-100 transition-opacity"
        />
        <span class="text-xl sm:text-2xl md:text-3xl text-green-400 font-mono">Effect</span>
      </div>
    </h1>

    <p class="text-xl sm:text-2xl md:text-3xl text-gray-300 mt-8 font-bold animate-float">
      One space. Infinite clarity. Zero outages.
    </p>

    <div class="mt-12 space-y-4">
      <p class="text-lg sm:text-xl text-warning-red animate-shake">
        ⚠️ That tiny space? It's worth millions in prevented outages
      </p>
      <p class="text-base sm:text-lg text-gray-500">
        Inspired by real events. <a href="https://blog.cloudflare.com/deep-dive-into-cloudflares-sept-12-dashboard-and-api-outage/" class="text-electric-blue hover:underline" target="_blank" rel="noopener">Read the story →</a>
      </p>
    </div>

    <!-- Scroll indicator -->
    <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce">
      <IconDisplay icon="chevronDown" className="text-white opacity-50" size={32} client:visible />
    </div>
  </div>
</section>

<style>
  .typing-text {
    display: inline-block;
    overflow: hidden;
    white-space: nowrap;
    border-right: 3px solid transparent;
    animation: typing 2s steps(3) infinite;
  }

  .typing-cursor {
    display: inline-block;
    width: 3px;
    background-color: #0EA5E9;
    margin-left: 2px;
  }

  @keyframes typing {
    0%, 20% {
      max-width: 0;
    }
    40%, 60% {
      max-width: 4em;
    }
    80%, 100% {
      max-width: 0;
    }
  }

  .glitch-lines {
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(14, 165, 233, 0.03) 2px,
      rgba(14, 165, 233, 0.03) 4px
    );
    animation: glitch-lines 8s linear infinite;
  }

  @keyframes glitch-lines {
    0% {
      background-position: 0 0;
    }
    100% {
      background-position: 0 10px;
    }
  }
</style>
